<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>ring.logger documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Ring-logger</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></div></li><li class="depth-2 current"><a href="ring.logger.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logger</span></div></a></li><li class="depth-3 branch"><a href="ring.logger.compat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compat</span></div></a></li><li class="depth-3"><a href="ring.logger.redaction.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>redaction</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ring.logger.html#var-default-log-fn"><div class="inner"><span>default-log-fn</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-default-redact-key.3F"><div class="inner"><span>default-redact-key?</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-default-request-keys"><div class="inner"><span>default-request-keys</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-make-transform-and-log-fn"><div class="inner"><span>make-transform-and-log-fn</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-wrap-log-request-params"><div class="inner"><span>wrap-log-request-params</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-wrap-log-request-start"><div class="inner"><span>wrap-log-request-start</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-wrap-log-response"><div class="inner"><span>wrap-log-response</span></div></a></li><li class="depth-1"><a href="ring.logger.html#var-wrap-with-logger"><div class="inner"><span>wrap-with-logger</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">ring.logger</h1><div class="doc"><pre class="plaintext">Ring middleware to log each request, response, and parameters.
</pre></div><div class="public anchor" id="var-default-log-fn"><h3>default-log-fn</h3><div class="usage"><code>(default-log-fn {:keys [level throwable message]})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L7">view source</a></div></div><div class="public anchor" id="var-default-redact-key.3F"><h3>default-redact-key?</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Set of keys redacted by default
</pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L18">view source</a></div></div><div class="public anchor" id="var-default-request-keys"><h3>default-request-keys</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L15">view source</a></div></div><div class="public anchor" id="var-make-transform-and-log-fn"><h3>make-transform-and-log-fn</h3><div class="usage"><code>(make-transform-and-log-fn transform-fn log-fn)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L10">view source</a></div></div><div class="public anchor" id="var-wrap-log-request-params"><h3>wrap-log-request-params</h3><div class="usage"><code>(wrap-log-request-params handler)</code><code>(wrap-log-request-params handler {:keys [log-fn log-level transform-fn request-keys redact-key? redact-value-fn], :or {log-fn default-log-fn, transform-fn identity, log-level :debug, request-keys default-request-keys, redact-key? default-redact-key?, redact-value-fn (constantly "[REDACTED]")}})</code></div><div class="doc"><pre class="plaintext">Ring middleware to log the parameters from each request

Parameters are redacted by default, replacing the values that correspond to
certain keys to "[REDACTED]". This is to prevent sensitive information from
being written out to logs.

Options may include:

  * log-fn: used to do the actual logging. Accepts a map with keys
            [level throwable message]. Defaults to `clojure.tools.logging/log`.
  * transform-fn: transforms a log item before it is passed through to log-fn. Messsage
            type it needs to handle: :params. It can filter messages by returning nil.
            Receives a map (a log item) with keys: [:level :throwable :message].
  * request-keys: Keys from the request that will be logged (unchanged) in addition to
            the data that ring.logger adds like [::type :params].
            Defaults to [:request-method :uri :server-name]
  * redact-key?: fn that is called on each key in the params map to check whether its
            value should be redacted. Receives the key, returns truthy/falsy. A common
            pattern is to use a set.
            Default value: #{:authorization :password :token :secret :secret-key :secret-token}</pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L22">view source</a></div></div><div class="public anchor" id="var-wrap-log-request-start"><h3>wrap-log-request-start</h3><div class="usage"><code>(wrap-log-request-start handler)</code><code>(wrap-log-request-start handler {:keys [log-fn transform-fn request-keys], :or {log-fn default-log-fn, transform-fn identity, request-keys default-request-keys}})</code></div><div class="doc"><pre class="plaintext">Ring middleware to log basic information about a request.

Adds the key :ring.logger/start-ms to the request map

Options may include:

  * log-fn: used to do the actual logging. Accepts a map with keys
            [level throwable message]. Defaults to `clojure.tools.logging/log`.
  * transform-fn: transforms a log item before it is passed through to log-fn. Messsage types
            it might need to handle: [:starting]. It can filter messages by returning nil.
            Receives a map (a log item) with keys: [:level :throwable :message].
  * request-keys: Keys from the request that will be logged (unchanged) in addition to the data
            that ring.logger adds like [::type ::ms :status].
            Defaults to [:request-method :uri :server-name]</pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L62">view source</a></div></div><div class="public anchor" id="var-wrap-log-response"><h3>wrap-log-response</h3><div class="usage"><code>(wrap-log-response handler)</code><code>(wrap-log-response handler {:keys [log-fn log-exceptions? transform-fn request-keys], :or {log-fn default-log-fn, transform-fn identity, log-exceptions? true, request-keys default-request-keys}})</code></div><div class="doc"><pre class="plaintext">Ring middleware to log response and timing for each request.

Takes the starting timestamp (in msec.) from the :ring.logger/start-ms key in
the request map, or System/currentTimeMillis if that key is not present.

Options may include:

  * log-fn: used to do the actual logging. Accepts a map with keys
            [level throwable message]. Defaults to `clojure.tools.logging/log`.
  * transform-fn: transforms a log item before it is passed through to log-fn. Messsage types
            it might need to handle: [:finish :exception]. It can filter messages by
            returning nil. Receives a map (a log item) with keys: [:level :throwable :message].
  * request-keys: Keys from the request that will be logged (unchanged) in addition to the data
            that ring.logger adds like [::type ::ms :status].
            Defaults to [:request-method :uri :server-name]
  * log-exceptions?: When true, logs exceptions as an :error level message, rethrowing
            the original exception. Defaults to true</pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L91">view source</a></div></div><div class="public anchor" id="var-wrap-with-logger"><h3>wrap-with-logger</h3><div class="usage"><code>(wrap-with-logger handler options)</code><code>(wrap-with-logger handler)</code></div><div class="doc"><pre class="plaintext">Returns a ring middleware handler to log arrival, response, and parameters
for each request.

Log messages are simple clojure maps that can be transformed to a different
representation (string, JSON, etc.) via the transform-fn option

Options may include:

  * log-fn: used to do the actual logging. Accepts a map with keys
            [level throwable message]. Defaults to `clojure.tools.logging/log`.
  * transform-fn: transforms a log item before it is passed through to log-fn. Messsage types
            it might need to handle: [:starting :params :finish :exception]. It can filter
            log items by returning nil. Log items are maps with keys: [:level :throwable :message].
  * request-keys: Keys from the request that will be logged (unchanged) in addition to the data
            that ring.logger adds like [::type ::ms].
            Defaults to [:request-method :uri :server-name]
  * log-exceptions?: When true, logs exceptions as an :error level message, rethrowing
            the original exception. Defaults to true
  * redact-key?: fn that is called on each key in the params map to check whether its
            value should be redacted. Receives the key, returns truthy/falsy. A common
            pattern is to use a set.
            Default value: #{:authorization :password :token :secret :secret-key :secret-token}</pre></div><div class="src-link"><a href="https://github.com/nberger/ring-logger/blob/1.0.0/src/ring/logger.clj#L143">view source</a></div></div></div></body></html>